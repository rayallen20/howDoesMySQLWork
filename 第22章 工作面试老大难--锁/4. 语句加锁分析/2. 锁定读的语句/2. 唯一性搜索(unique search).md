# 2. 唯一性搜索(unique search)

**若在扫描某个扫描区间的记录前,就能事先确定该扫描区间内最多只包含一条记录的话,则把这种情况称为唯一性搜索**.

如何确定某个扫描区间最多只包含一条记录? 查询语句只要符合以下条件(以下条件为逻辑且关系),就可以确定最多只包含一条记录了:

- 匹配模式为精确匹配(即扫描区间为单点扫描区间)
- 使用的索引是主键或者唯一二级索引
  - 若使用的索引是唯一二级索引,则搜索条件不能为`索引列 IS NULL`的形式
  - 因为唯一二级索引列可以存储多个值为`NULL`的记录
- 若索引中包含多个列,则在生成扫描区间时,每个列都要被用到
  - 即: 若索引为联合索引,则索引中的每个列都要出现在查询语句的搜索条件中

比如,为某个表的a/b这2个列建立了一个唯一联合索引`uk_a_b(a,b)`:

- 若搜索条件为`a = 1`,则形成的扫描区间中,不能保证该扫描区间中最多只包含一条记录
  - 因为b可能有多个不同的值,所以可能会有多条记录满足`a = 1`
- 若搜索条件为`a = 1 AND b = 1`,则形成的扫描区间中,可以保证该扫描区间中最多只包含一条记录
  - 因为a和b都被用到了,所以在唯一联合索引`uk_a_b(a,b)`中,只会有1条记录满足`a = 1 AND b = 1`
