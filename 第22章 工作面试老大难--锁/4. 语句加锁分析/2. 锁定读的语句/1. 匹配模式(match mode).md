# 1. 匹配模式(match mode)

在使用索引执行查询时,查询优化器首先会生成若干个扫描区间.针对每一个扫描区间,都可以在该扫描区间中快速地定位到第一条记录,
然后沿着这条记录所在的单向链表就可以访问到该扫描区间内的其他记录,直到某条记录不在该扫描区间中为止.**若被扫描的区间是一个单点扫描区间,
就可以说此时的匹配模式为精确匹配**.比如:为某个表的a/b这2个列建立了一个联合索引`idx_a_b(a, b)`,举几种不同的查询情况:

- 若形成扫描区间的边界条件是`a = 1`,则该条件对应的扫描区间就是`a ∈ [1,1]`

    InnoDB的设计者认为这是一个单点扫描区间.若查询优化器决定通过访问该扫描区间中的记录来执行查询,则该场景下的匹配模式就是精确匹配

- 若形成扫描区间的搜索条件是`a = 1 AND b = 1`,则它对应的扫描区间就是`(a, b) ∈ [(1,1), (1,1)]`

    InnoDB的设计者认为这也是一个单点扫描区间.若査询优化器决定通过访问该扫描区间中的记录来执行查询,则该场景下的匹配模式就是精确匹配

- 若形成扫描区间的搜索条件是`a = 1 AND b >= 1`,则对应的扫描区间就是`(a, b) ∈ [(1,1), (1, +∞))`

    InnoDB的设计者认为该扫描区间不算是一个单点扫描区间.若查询优化器决定通过访问该扫描区间中的记录来执行查询,则该场景下的匹配模式就不是精确匹配

简单理解: 访问方法为

- [`const`访问方法](https://github.com/rayallen20/howDoesMySQLWork/blob/main/%E7%AC%AC10%E7%AB%A0%20%E6%9D%A1%E6%9D%A1%E5%A4%A7%E8%B7%AF%E9%80%9A%E7%BD%97%E9%A9%AC--%E5%8D%95%E8%A1%A8%E8%AE%BF%E9%97%AE%E6%96%B9%E6%B3%95/2.%20const.md)
- [`ref`访问方法](https://github.com/rayallen20/howDoesMySQLWork/blob/main/%E7%AC%AC10%E7%AB%A0%20%E6%9D%A1%E6%9D%A1%E5%A4%A7%E8%B7%AF%E9%80%9A%E7%BD%97%E9%A9%AC--%E5%8D%95%E8%A1%A8%E8%AE%BF%E9%97%AE%E6%96%B9%E6%B3%95/3.%20ref.md)
- [`eq_ref`访问方法](https://github.com/rayallen20/howDoesMySQLWork/blob/main/%E7%AC%AC15%E7%AB%A0%20%E6%9F%A5%E8%AF%A2%E4%BC%98%E5%8C%96%E7%9A%84%E7%99%BE%E7%A7%91%E5%85%A8%E4%B9%A6--EXPLAIN%E8%AF%A6%E8%A7%A3/1.%20%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92%E8%BE%93%E5%87%BA%E4%B8%AD%E5%90%84%E5%88%97%E8%AF%A6%E8%A7%A3/5.%20type/3.%20eq_ref.md)时,形成的扫描区间即为单点扫描区间
- [`unique_subquery`访问方法](https://github.com/rayallen20/howDoesMySQLWork/blob/main/%E7%AC%AC15%E7%AB%A0%20%E6%9F%A5%E8%AF%A2%E4%BC%98%E5%8C%96%E7%9A%84%E7%99%BE%E7%A7%91%E5%85%A8%E4%B9%A6--EXPLAIN%E8%AF%A6%E8%A7%A3/1.%20%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92%E8%BE%93%E5%87%BA%E4%B8%AD%E5%90%84%E5%88%97%E8%AF%A6%E8%A7%A3/5.%20type/8.%20unique_subquery.md)

时,形成的扫描区间均为单点扫描区间,此时的匹配模式均为精确匹配.

可以认为"单点扫描区间"中:

- "单"指的是只有1个扫描区间
- "点"指的是形成该扫描区间的边界条件是`索引 = 某个值`的"点"
