# 6. DEPENDENT SUBQUERY

DEPENDENT SUBQUERY在文档中的描述为: First SELECT in subquery, dependent on outer query

若:

- **包含子查询的查询语句不能够转换为对应的半连接形式**
- **且该子查询是相关子查询**

则该子查询的第1个`SELECT`关键字代表的那个查询的`select_type`值为DEPENDENT SUBQUERY

例如:

```
mysql> EXPLAIN SELECT * FROM single_table WHERE key1 IN (SELECT key1 FROM single_table2 WHERE single_table.key2 = single_table2.key2) OR key3 = 'a';
+----+--------------------+---------------+------------+--------+-------------------+----------+---------+-----------------------------------+------+----------+-------------+
| id | select_type        | table         | partitions | type   | possible_keys     | key      | key_len | ref                               | rows | filtered | Extra       |
+----+--------------------+---------------+------------+--------+-------------------+----------+---------+-----------------------------------+------+----------+-------------+
|  1 | PRIMARY            | single_table  | NULL       | ALL    | idx_key3          | NULL     | NULL    | NULL                              | 9817 |   100.00 | Using where |
|  2 | DEPENDENT SUBQUERY | single_table2 | NULL       | eq_ref | idx_key2,idx_key1 | idx_key2 | 5       | charset_demo_db.single_table.key2 |    1 |    10.00 | Using where |
+----+--------------------+---------------+------------+--------+-------------------+----------+---------+-----------------------------------+------+----------+-------------+
2 rows in set, 2 warnings (0.00 sec)
```

可以看到,外层查询的`select_type`值为PRIMARY,子查询的`select_type`DEPENDENT SUBQUERY.

注意: `select_type`为DEPENDENT SUBQUERY的子查询可能会被执行多次(类似于`for`循环套`for`循环中的内层`for`循环).
每次执行时,都会使用外层查询的当前行(又称为外层行)的值来计算子查询的结果.
