# 9. MATERIALIZED

MATERIALIZED在文档中的描述为: Materialized subquery

当查询优化器在执行包含子查询的语句时,选择将子查询物化之后与外层查询进行连接查询,该子查询对应的`select_type`值为MATERIALIZED.

例如:

```
mysql> EXPLAIN SELECT * FROM single_table WHERE key1 IN (SELECT key1 FROM single_table2);
+----+--------------+---------------+------------+--------+---------------------+---------------------+---------+-----------------------------------+------+----------+-------------+
| id | select_type  | table         | partitions | type   | possible_keys       | key                 | key_len | ref                               | rows | filtered | Extra       |
+----+--------------+---------------+------------+--------+---------------------+---------------------+---------+-----------------------------------+------+----------+-------------+
|  1 | SIMPLE       | single_table  | NULL       | ALL    | idx_key1            | NULL                | NULL    | NULL                              | 9817 |   100.00 | Using where |
|  1 | SIMPLE       | <subquery2>   | NULL       | eq_ref | <auto_distinct_key> | <auto_distinct_key> | 403     | charset_demo_db.single_table.key1 |    1 |   100.00 | NULL        |
|  2 | MATERIALIZED | single_table2 | NULL       | index  | idx_key1            | idx_key1            | 403     | NULL                              | 9942 |   100.00 | Using index |
+----+--------------+---------------+------------+--------+---------------------+---------------------+---------+-----------------------------------+------+----------+-------------+
3 rows in set, 1 warning (0.00 sec)
```

执行计划的第3条记录的`id`的`select_type`值为MATERIALIZED.可以看出,查询优化器是把子查询先转换成物化表.
执行计划的前2条记录的`id`值都为1,说明这2条记录对应的表进行的是连接查询.

注意:第2条记录的`table`列的值为`<subquery2>`,说明该表其实就是`id`为2对应的子查询执行之后产生的物化表;然后将`single_table`和该物化表进行连接查询
