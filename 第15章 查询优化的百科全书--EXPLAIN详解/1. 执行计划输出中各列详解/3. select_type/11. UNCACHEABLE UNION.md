# 11. UNCACHEABLE UNION

UNCACHEABLE UNION在文档中的描述为: The second or later select in a UNION that belongs to an uncacheable subquery (see UNCACHEABLE SUBQUERY)

和`UNCACHEABLE SUBQUERY`类似,当UNION的子查询结果不可缓存时,该UNION对应的`select_type`值为`UNCACHEABLE UNION`

例如:

```
mysql> EXPLAIN SELECT *
    -> FROM single_table
    -> WHERE id IN (
    -> SELECT x FROM (
    -> (SELECT id AS x FROM single_table2 ORDER BY RAND() LIMIT 1)
    -> UNION
    -> (SELECT id AS x FROM single_table  ORDER BY RAND() LIMIT 1)
    -> ) AS u
    -> );
+----+-------------------+---------------+------------+--------+---------------+----------+---------+------+------+----------+----------------------------------------------+
| id | select_type       | table         | partitions | type   | possible_keys | key      | key_len | ref  | rows | filtered | Extra                                        |
+----+-------------------+---------------+------------+--------+---------------+----------+---------+------+------+----------+----------------------------------------------+
|  1 | PRIMARY           | <derived3>    | NULL       | ALL    | NULL          | NULL     | NULL    | NULL |    2 |   100.00 | NULL                                         |
|  1 | PRIMARY           | single_table  | NULL       | eq_ref | PRIMARY       | PRIMARY  | 4       | u.x  |    1 |   100.00 | NULL                                         |
|  3 | DERIVED           | single_table2 | NULL       | index  | NULL          | idx_key2 | 5       | NULL | 9942 |   100.00 | Using index; Using temporary; Using filesort |
|  4 | UNCACHEABLE UNION | single_table  | NULL       | index  | NULL          | uk_key2  | 5       | NULL | 9817 |   100.00 | Using index; Using temporary; Using filesort |
|  5 | UNION RESULT      | <union3,4>    | NULL       | ALL    | NULL          | NULL     | NULL    | NULL | NULL |     NULL | Using temporary                              |
+----+-------------------+---------------+------------+--------+---------------+----------+---------+------+------+----------+----------------------------------------------+
5 rows in set, 1 warning (0.00 sec)
```
