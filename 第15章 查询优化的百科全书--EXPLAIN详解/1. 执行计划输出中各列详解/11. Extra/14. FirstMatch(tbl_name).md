# 14. `FirstMatch(tbl_name)`

在将`IN`子査询转为半连接时,若采用的是[`FirstMatch`](https://github.com/rayallen20/howDoesMySQLWork/blob/main/%E7%AC%AC14%E7%AB%A0%20%E5%9F%BA%E4%BA%8E%E8%A7%84%E5%88%99%E7%9A%84%E4%BC%98%E5%8C%96(%E5%86%85%E5%90%AB%E5%AD%90%E6%9F%A5%E8%AF%A2%E4%BC%98%E5%8C%96%E4%BA%8C%E4%B8%89%E4%BA%8B)/3.%20%E5%AD%90%E6%9F%A5%E8%AF%A2%E4%BC%98%E5%8C%96/2.%20%E5%AD%90%E6%9F%A5%E8%AF%A2%E5%9C%A8MySQL%E4%B8%AD%E6%98%AF%E6%80%8E%E4%B9%88%E6%89%A7%E8%A1%8C%E7%9A%84/3.%20IN%E5%AD%90%E6%9F%A5%E8%AF%A2%E4%BC%98%E5%8C%96/3.%20%E5%B0%86%E5%AD%90%E6%9F%A5%E8%AF%A2%E8%BD%AC%E6%8D%A2%E4%B8%BA%E5%8D%8A%E8%BF%9E%E6%8E%A5/6.%20FirstMatch(%E9%A6%96%E6%AC%A1%E5%8C%B9%E9%85%8D).md)执行策略,
则被驱动表执行计划的`Extra`列就显示`FirstMatch(tbl_name)`提示.例如:

```
mysql> EXPLAIN SELECT * FROM single_table WHERE common_field IN (SELECT key1 FROM single_table2 where single_table.key3 = single_table2.key3);
+----+--------------+---------------+------------+--------+---------------------+---------------------+---------+-----------------------------------------------------------------------------+-------+----------+-------------+
| id | select_type  | table         | partitions | type   | possible_keys       | key                 | key_len | ref                                                                         | rows  | filtered | Extra       |
+----+--------------+---------------+------------+--------+---------------------+---------------------+---------+-----------------------------------------------------------------------------+-------+----------+-------------+
|  1 | SIMPLE       | single_table  | NULL       | ALL    | idx_key3            | NULL                | NULL    | NULL                                                                        | 10200 |   100.00 | Using where |
|  1 | SIMPLE       | <subquery2>   | NULL       | eq_ref | <auto_distinct_key> | <auto_distinct_key> | 806     | charset_demo_db.single_table.common_field,charset_demo_db.single_table.key3 |     1 |   100.00 | NULL        |
|  2 | MATERIALIZED | single_table2 | NULL       | ALL    | idx_key1,idx_key3   | NULL                | NULL    | NULL                                                                        |  9942 |   100.00 | NULL        |
+----+--------------+---------------+------------+--------+---------------------+---------------------+---------+-----------------------------------------------------------------------------+-------+----------+-------------+
3 rows in set, 2 warnings (0.00 sec)
```

```
mysql> EXPLAIN
    -> SELECT /*+ SEMIJOIN(@sq FIRSTMATCH)
    ->           NO_SEMIJOIN(@sq DUPSWEEDOUT, LOOSESCAN, MATERIALIZATION) */
    ->        *
    -> FROM single_table
    -> WHERE single_table.common_field IN (
    ->   SELECT /*+ QB_NAME(sq) */ single_table2.key1
    ->   FROM single_table2
    ->   WHERE single_table2.key3 = single_table.key3
    -> );
+----+-------------+---------------+------------+------+-------------------+----------+---------+-------------------------------------------+-------+----------+---------------------------------------+
| id | select_type | table         | partitions | type | possible_keys     | key      | key_len | ref                                       | rows  | filtered | Extra                                 |
+----+-------------+---------------+------------+------+-------------------+----------+---------+-------------------------------------------+-------+----------+---------------------------------------+
|  1 | SIMPLE      | single_table  | NULL       | ALL  | idx_key3          | NULL     | NULL    | NULL                                      | 10200 |   100.00 | Using where                           |
|  1 | SIMPLE      | single_table2 | NULL       | ref  | idx_key1,idx_key3 | idx_key1 | 403     | charset_demo_db.single_table.common_field |     1 |     5.00 | Using where; FirstMatch(single_table) |
+----+-------------+---------------+------------+------+-------------------+----------+---------+-------------------------------------------+-------+----------+---------------------------------------+
2 rows in set, 3 warnings (0.00 sec)
```
