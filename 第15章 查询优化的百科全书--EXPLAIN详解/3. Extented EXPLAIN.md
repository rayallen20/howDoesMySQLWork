# 3. `Extented EXPLAIN`

在使用`EXPLAIN`语句查看了某个查询的执行计划后,紧接着还可以使用`SHOW WARNING`语句查看与该查询的执行计划有关的一些扩展信息.例如:

```
mysql> EXPLAIN SELECT single_table.key1, single_table2.key1 FROM single_table LEFT JOIN single_table2 ON single_table.key1 = single_table2.key1 WHERE single_table2.common_field IS NOT NULL;
+----+-------------+---------------+------------+------+---------------+----------+---------+------------------------------------+------+----------+-------------+
| id | select_type | table         | partitions | type | possible_keys | key      | key_len | ref                                | rows | filtered | Extra       |
+----+-------------+---------------+------------+------+---------------+----------+---------+------------------------------------+------+----------+-------------+
|  1 | SIMPLE      | single_table2 | NULL       | ALL  | idx_key1      | NULL     | NULL    | NULL                               | 9942 |    90.00 | Using where |
|  1 | SIMPLE      | single_table  | NULL       | ref  | idx_key1      | idx_key1 | 403     | charset_demo_db.single_table2.key1 |    1 |   100.00 | Using index |
+----+-------------+---------------+------------+------+---------------+----------+---------+------------------------------------+------+----------+-------------+
2 rows in set, 1 warning (0.01 sec)
```

```
mysql> SHOW WARNINGS\G;
*************************** 1. row ***************************
  Level: Note
   Code: 1003
Message: /* select#1 */ select `charset_demo_db`.`single_table`.`key1` AS `key1`,`charset_demo_db`.`single_table2`.`key1` AS `key1` from `charset_demo_db`.`single_table` join `charset_demo_db`.`single_table2` where ((`charset_demo_db`.`single_table`.`key1` = `charset_demo_db`.`single_table2`.`key1`) and (`charset_demo_db`.`single_table2`.`common_field` is not null))
1 row in set (0.00 sec)

ERROR: 
No query specified
```

可以看到`SHOW WARNINGS`展示的信息有3个字段:

- `Level`
- `Code`
- `Message`

最常见的就是`Code`为`1003`的信息,当Code值为`1003`时,`Message`字段展示的信息类似于查询优化器将查询语句重写后的语句.
例如上面的查询本来是一个左连接查询,但是有一个条件`single_table2.common_field IS NOT NULL`,
这就会导致查询优化器把左连接查询优化为内连接查询.从`SHOW WARNINGS`的`Message`字段也可以看出:原本的`LEFT JOIN`已经变成了`JOIN`.
