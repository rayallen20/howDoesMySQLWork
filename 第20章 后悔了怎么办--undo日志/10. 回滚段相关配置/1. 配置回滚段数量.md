# 1. 配置回滚段数量

前面讲过,系统中共有128个回滚段,其实这只是默认值.系统变量`innodb_rollback_segments`用于配置回滚段的数量:

```
mysql> SHOW VARIABLES LIKE '%innodb_rollback_segments%';
+--------------------------+-------+
| Variable_name            | Value |
+--------------------------+-------+
| innodb_rollback_segments | 128   |
+--------------------------+-------+
1 row in set (0.04 sec)
```

该变量的默认值为128,作用域为`GLOBAL`级别,可配置的范围为1-128.但该变量并不会影响针对临时表的回滚段数量,即:

- 若`系统变量innodb_rollback_segments的值 = 1`,则只会有1个针对普通表的可用回滚段,但仍然有32个针对临时表的可用回滚段
  - 若`1 ≤ 系统变量innodb_rollback_segments的值 ≤ 33`,效果和`系统变量innodb_rollback_segments的值 = 1`相同
- 若`系统变量innodb_rollback_segments的值 ＞ 33`,则针对普通表的可用回滚段数量为: `系统变量innodb_rollback_segments的值 - 32`
