# 1. 编码和解码使用的字符集不一致

同一个字符的字节序列,若使用不同的字符集去解码,会得到不同的字符.例:

字符`'我'`在`utf8mb4`字符集编码下的字节序列为`0xE68891`(3字节).

若程序A将这个字节序列发送给程序B,而程序B使用不同的字符集解码这个字节序列(假设使用的是`gb2312`),其过程如下:

1. 先看第1个字节,`0xE6`,它的值大于`0x7F`(十进制的127),因此该字符是2字节编码.继续读取下一个字节,得到`0xE688`,`gb2312`编码表中,`0xE688`对应的字符为`'鎴'`
2. 继续读取下一个字节,得到`0x91`,它的值也大于`0x7F`,试图继续读下一个字节,发现没有了,所以这是半个字符
3. 最终,`0xE68891`被`gb2312`字符集解释成1个字符`'鎴'`和半个字符

假设使用的是`Latin1`字符集(该字符集使用1个字节来进行编码),其过程如下:

1. 先读第1个字节`0xE6`,该字节序列在`Latin1`编码表中对应的字符为`æ`
2. 再读第2个字节`0x88`,该字节序列在`Latin1`编码表中对应的字符为`ˆ`
3. 再读第3个字节`0x91`,该字节序列在`Latin1`编码表中对应的字符为`‘`
4. 字节序列`0xE68891`被`Latin1`字符集解释后的字符串就是`'æˆ‘'`

**对于同一个字符串,编码和解码使用的字符集不同,会导致得到的字符串不同**