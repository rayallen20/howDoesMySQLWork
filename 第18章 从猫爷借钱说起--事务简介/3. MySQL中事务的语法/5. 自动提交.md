# 5. 自动提交

系统变量`autocommit`用于控制事务的自动提交行为.该变量的作用域为`GLOBAL`和`SESSION`级别.默认值为`ON`:

```
mysql> SHOW VARIABLES LIKE 'autocommit';
+---------------+-------+
| Variable_name | Value |
+---------------+-------+
| autocommit    | ON    |
+---------------+-------+
1 row in set (0.00 sec)
```

**默认情况下,若不显式使用`START TRANSACTION`或者`BEGIN`语句开启一个事务,则每一条语句都算是一个独立的事务,这种特性称为事务的自动提交**.
若在狗哥向猫爷转账10元时,不以`START TRANSACTION`或者`BEGIN`语句显式开启一个事务,则下边这两条语句就相当于放到2个独立的事务中去执行:

```
UPDATE account SET balance = balance - 10 WHERE id = 1;
UPDATE account SET balance = balance + 10 WHERE id = 2;
```

如果想关闭自动提交功能,可以使用以下2种方法:

- 显式使用`START TRANSACTION`或者`BEGIN`语句开启一个事务

    这样在本次事务提交或者回滚前会暂时关闭掉自动提交的功能

- 把系统变量`autocommit`的值设置为`OFF`

    `SET autocommit = OFF;`

执行如上2种操作之一后,写入的多条语句就是属于同一个事务了,直到:

- 显式的写出`COMMIT`语句来把该事务提交
- 或显式的写出`ROLLBACK`语句来把该事务回滚掉
