# 3. `IBUF_BITMAP`类型

![每个组中前几个页面的类型](./img/每个组中前几个页面的类型.jpg)

如上图示,每个分组中第2个页面的类型都是`IBUF_BITMAP`.这种类型的页中记录了一些有关`Change Buffer`的东西.

平时说的向表中插入一条记录,其实本质上是向每个索引对应的B+树中插入记录.该记录首先插入聚簇索引页面,然后再插入每个二级索引页面.
这些页面在表空间中随机分布,将会产生大量的随机I/0,严重影响性能.对于UPDATE和DELETE操作来说,也会带来许多的随机I/O.
所以InnoDB的设计者引入了一种称为`Change Buffer`的结构(本质上也是表空间中的一颗B+树,它的根节点存储在系统表空间中,后边会讲到).
在修改非唯一二级索引页面时(修改唯一二级索引页面时是否利用`Change Buffer`取决于很多情况,这里不展开讨论),
如果该页面尚未被加载到内存中(仍在磁盘上),那么该修改将先被暂时缓存到`Change Buffer`中,之后服务器空闲
或者其他什么原因导致这个要修改的二级索引页面面从磁盘上加载到内存中时,再将修改合并到对应页面.

另外,在很久之前的版本中只会缓存INSERT操作对二级索引页面所做的修改,所以`Change Buffer`以前被称作`Insert Buffer`,
所以在各种命名上延续了之前的叫法,比方说`IBUF`其实是`Insert Buffer`的缩写.后续内容中将不会再对`Change Buffer`的运行过程做更多详细介绍.
