# 0. 概述

使用INSERT语句向表中插入的记录称之为用户数据.MySQL只是作为一个软件来为用户保管这些数据,提供方便的增删改查接口而已.
但是每当向一个表中插入一条记录时,MySQL先要校验一下插入语句对应的表存不存在,插入的列和表中的列是否符合.
如果语法没有问题的话,还需要知道该表的聚簇索引和所有二级索引对应的根页面是哪个表空间的哪个页面,
然后把记录插入对应索引的B+树中.所以,MySQL除了保存着用户插入的用户数据之外,还需要保存许多额外的信息,例如:

- 某个表属于哪个表空间，表里边有多少列
- 表对应的每一个列的类型是什么
- 该表有多少索引,每个索引对应哪几个字段,该索引对应的根页面在哪个表空间的哪个页面
- 该表有哪些外键,外键对应哪个表的哪些列
- 某个表空间对应文件系统上文件路径是什么

上述信息并不是使用INSERT语句插入的用户数据,这些数据实际上是为了更好的管理用户数据而不得已引入的一些额外数据,
这些数据也称为元数据.InnoDB存储引擎特意定义了一些列的内部系统表(internal system table)来记录这些这些元数据:

|         表名         |                描述                |
|:------------------:|:--------------------------------:|
|    `SYS_TABLES`    |       整个InnoDB存储引擎中所有的表的信息       |
|   `SYS_COLUMNS`    |       整个InnoDB存储引擎中所有的列的信息       |
|   `SYS_INDEXES`    |      整个InnoDB存储引擎中所有的索引的信息       |
|    `SYS_FIELDS`    |    整个InnoDB存储引擎中所有的索引对应的列的信息     |
|   `SYS_FOREIGN`    |       整个InnoDB存储引擎中所有的外键信息       |
| `SYS_FOREIGN_COLS` |     整个InnoDB存储引擎中所有的外键对应列的信息     |
| `SYS_TABLESPACES`  |      整个InnoDB存储引擎中所有的表空间信息       |
|  `SYS_DATAFILES`   | 整个InnoDB存储引擎中所有的表空间对应文件系统的文件路径信息 |
|   `SYS_VIRTUAL`    |     整个InnoDB存储引擎中所有的虚拟生成列的信息     |

**这些系统表也被称为数据字典**,它们都是以B+树的形式保存在系统表空间的某些页面中.其中:

- `SYS_TABLES`
- `SYS_COLUMNS`
- `SYS_INDEXES`
- `SYS_FIELDS`

这4个表尤其重要,称之为基本系统表(basic system tables),所以先来看这4个表的结构.

注意: 用户是不能直接访问InnoDB的这些内部系统表的,除非直接去解析系统表空间对应文件系统上的文件.
不过InnoDB的设计者考虑到查看这些表的内容可能有助于用户分析问题,所以在系统数据库`information_schema`中提供了一些内容相同的表.

注: 

以上内容是针对MySQL5.X的.从MySQL8.0开始,原先在MySQL5.X中的系统表已经不再以同样的方式存在,
它的功能已经被数据字典(Data Dictionary)系统表所取代.

在MySQL5.X中:

- `SYS_TABLES`是`InnoDB`内部的系统表,它记录了`InnoDB`存储引擎下的所有表的元数据信息
- 这些系统表存在于共享表空间`ibdata1`中,是不可直接查询的

从MySQL8.0开始:

- 引入了统一的数据字典,所有表的元数据(包括系统表和用户表)都存储在一个真正的InnoDB表中
  - 而不是像5.X那样使用专用格式存储在`ibdata1`
  - 数据存储在`mysql.ibd`中
- 系统表存放在名为`mysql`的数据库中
  - 只是这些表是供MySQL内部使用的,不允许普通SQL用户直接访问
