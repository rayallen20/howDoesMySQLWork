# 1. 根页面万年不动窝

前边介绍B+树索引时,为理解上的方便,先把存储用户记录的叶子节点都画出来,然后再画存储目录项记录的内节点.实际上B+树的形成过程是下面这样的:

- 每当为某个表创建一个B+树索引(聚簇索引不是人为创建的,它默认就存在)时,都会为这个索引创建一个根节点页面.
    - 最开始表中没有数据的时候,每个B+树索引对应的根节点中既没有用户记录,也没有目录项记录
- 随后向表中插入用户记录时,先把用户记录存储到这个根节点中
- 在根节点中的可用空间用完时继续插入记录,此时会将根节点中的所有记录复制到一个新分配的页(比如页a)中,然后对这个新页进行页分裂操作,得到另一个新页(比如页b)
    - 此时新插入的记录会根据键值(聚簇索引就是主键值,二级索引就是对应的索引列的值)的大小分配到页a或页b中
    - 根节点此时就升级为存储目录项记录的页,也就是说,需要把页a和页b对应的目录项记录插入到根节点中

这个过程中,需要注意的是: **一个B+树索引的根节点自创建之日起,便不会再移动(也就是页号不再改变)**.
这样只要对某个表建立一个索引,那么它的根节点的页号便会被记录到某个地方,后续凡是InnoDB存储引擎需要用到这个索引时,
都会从这个固定的地方取出根节点的页号,从而来访问这个索引

注: 这个"存储某个索引的根节点在哪个页面中"的信息就是数据字典中的一项信息,关于更多数据字典的内容,后续会讲到
