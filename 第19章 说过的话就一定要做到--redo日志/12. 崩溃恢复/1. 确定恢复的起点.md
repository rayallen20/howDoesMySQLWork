# 1. 确定恢复的起点

前面说过,对于那些`lsn值 < checkpoint_lsn`的redo日志,它们是可以被覆盖的.也就是说这些`redo`日志对应的脏页都已经被刷新到磁盘中了.
既然这些脏页已经被刷盘,也就没有必要恢复这些页了.对于那些`lsn值 >= checkpoint_lsn`的redo日志,它们对应的脏页可能没有被刷盘,
也可能被刷盘了,无法确定(因为"刷脏操作"和"推进`checkpoint`操作"是两个独立的后台线程,它们之间没有任何同步机制).
所以需要从`lsn值 = checkpoint_lsn`的`redo`日志开始恢复页面.

在`redo`日志文件组的第一个文件的管理信息中,有[2个block](https://github.com/rayallen20/howDoesMySQLWork/blob/main/%E7%AC%AC19%E7%AB%A0%20%E8%AF%B4%E8%BF%87%E7%9A%84%E8%AF%9D%E5%B0%B1%E4%B8%80%E5%AE%9A%E8%A6%81%E5%81%9A%E5%88%B0--redo%E6%97%A5%E5%BF%97/6.%20redo%E6%97%A5%E5%BF%97%E6%96%87%E4%BB%B6/3.%20redo%E6%97%A5%E5%BF%97%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F.md)都存储了`checkpoint_lsn`的信息,当然是要选取最近发生的那次`checkpoint`的信息.
用于衡量`checkpoint`发生时间早晚的信息是`checkpoint_no`.只要把`checkpoint1`和`checkpoint2`这2个block中的`checkpoint_no`值
读出来比一下大小,哪个block中的`checkpoint_no`值更大,说明哪个`block`存储的就是最近的一次`checkpoint`信息.这样就能拿到
最近发生的`checkpoint`对应的`checkpoint_lsn`值和它在`redo`日志文件组中的偏移量`checkpoint_offset`.
