# 4. 缓冲页的哈希处理

前文说过,当需要访问某个页中的数据时,会把该页从磁盘加载到`Buffer Pool`中,若该页已经在`Buffer Pool`中,则直接使用就即可.
那么问题也就来了:如何得知某页在不在`Buffer Pool`中?

在磁盘中,根据`表空间号 + 页号`可以定位一个页.那么在内存中,把`表空间号 + 页号`作为key,缓冲页就是key对应的value,
就可以在内存中定位一个页了.至于通过一个key快速找到value的方式,自然就是哈希表了.

所以用`表空间号 + 页号`作为key,用缓冲页控制块的地址作为value来创建一个哈希表即可.在需要访问某个页的数据时:

- 先从哈希表中根据`表空间号 + 页号`查找是否存在对应的缓冲页
  - 有,直接使用该缓冲页即可
  - 没有
    - 从free链表中选一个空闲的缓冲页
    - 把磁盘中对应的页加载到该缓冲页的位置

即可.
