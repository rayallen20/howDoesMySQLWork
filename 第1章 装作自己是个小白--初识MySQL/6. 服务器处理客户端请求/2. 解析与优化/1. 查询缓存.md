# 1. 查询缓存

MySQL服务器程序处理查询请求时,会把刚刚处理过的查询请求和结果缓存起来.

如果下一次有同样的请求过来,则直接从缓存中查找结果,不需要再去底层的表中查找了.

这个缓存结果可以在不同的客户端之间共享,即:如果客户端A刚刚查询了一个语句,而客户端B之后发送了同样的查询请求,那么客户端B的这次查询就可以直接使用查询缓存中的数据

但是,**如果2个查询请求有任何字符上的不同(例如:空格/注释/大小写),都会导致缓存不命中**

**如果查询请求中包含某些系统函数/用户自定义变量和函数/一些系统表(如`mysql`/`information_schema`/`performance_schema`数据库中的表),则这个请求就不会被缓存**

这里以系统函数`NOW()`为例:

每次调用都会产生最新的当前时间,如果在一个查询请求中调用了这个函数,那即使查询请求的文本信息都一样,那不同时间的两次查询也应该得到不同的结果,如果在第一次查询时就缓存了,那第二次查询的时候直接使用第一次查询的结果就是错误的

既然是缓存,就有失效.MySQL的缓存系统会监测涉及到的每张表,只要该表的结构或者数据被修改(如对该表使用了`INSERT`/`UPDATE`/`DELETE`/`TRUNCATE TABLE`/`ALTER TABLE`/`DROP TABLE`/`DROP DATABASE`语句),则所有与该表有关的查询缓存都将变为无效并从查询缓存中删除

注:

- 从MySQL5.7.20开始,不推荐使用查询缓存
- 在MySQL 8.0中删除查询缓存