# 3. 基于内存的非永久性统计数据

当把系统变量`innodb_stats_persistent`的值设置为OFF时,之后创建的表的统计数据默认就都是非永久性的了.
或者在创建表或修改表时,直接将`STATS_PERSISTENT`属性的值设置为0,则该表的统计数据就是非永久性的了.

与永久性的统计数据不同,非永久性的统计数据采样的页面数量是由`innodb_stats_transient_sample_pages`控制的,
该系统变量的默认值为8.

```
mysql> SHOW VARIABLES LIKE 'innodb_stats_transient_sample_pages';
+-------------------------------------+-------+
| Variable_name                       | Value |
+-------------------------------------+-------+
| innodb_stats_transient_sample_pages | 8     |
+-------------------------------------+-------+
1 row in set (0.01 sec)
```

非永久性的统计数据在每次服务器关闭时以及执行某些操作后会被清除,并在下次访问表时重新计算.这就可能导致在重新计算统计数据时得到不同的结果,
从而可能生成经常变化的执行计划,这可能让用户非常懵.不过,最近的MySQL版本都不怎么用这种基于内存的非永久性统计数据了,
所以这里也就不深入讲解它了.
