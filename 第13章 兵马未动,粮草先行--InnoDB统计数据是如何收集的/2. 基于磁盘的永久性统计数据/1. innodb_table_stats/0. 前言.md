# 0. 前言

`innodb_table_stats`表中各个列的含义如下:

|            字段名             |      描述       |
|:--------------------------:|:-------------:|
|      `database_name`       |     数据库名      |
|        `table_name`        |      表名       |
|       `last_update`        |  本条记录最后更新时间   |
|          `n_rows`          |    表中记录的条数    |
|   `clustered_index_size`   | 表的聚簇索引占用的页面数量 |
| `sum_of_other_index_sizes` | 表的其他索引占用的页面数量 |

注意该表的主键是`(database_name, table_name)`.也就是**`innodb_table_stats`表的每条记录代表着1个表的统计信息**.该表内容如下:

```
mysql> SELECT * FROM mysql.innodb_table_stats;
+-----------------------+--------------------+---------------------+--------+----------------------+--------------------------+
| database_name         | table_name         | last_update         | n_rows | clustered_index_size | sum_of_other_index_sizes |
+-----------------------+--------------------+---------------------+--------+----------------------+--------------------------+
| charset_demo_db       | index_demo         | 2025-07-29 08:05:39 |      3 |                    1 |                        0 |
| charset_demo_db       | off_page_demo      | 2025-07-25 20:05:51 |      0 |                    1 |                        0 |
| charset_demo_db       | page_demo          | 2025-07-27 15:24:35 |     16 |                    1 |                        0 |
| charset_demo_db       | record_format_demo | 2025-07-25 17:40:30 |      2 |                    1 |                        0 |
| charset_demo_db       | single_table       | 2025-07-31 10:46:17 |  10200 |                   97 |                       78 |
| charset_demo_db       | t                  | 2025-07-24 16:39:20 |      5 |                    1 |                        0 |
| charset_demo_db       | test_ibd           | 2025-07-31 17:39:44 |      0 |                    1 |                        0 |
| charset_demo_db       | tt                 | 2025-07-24 15:43:43 |      0 |                    1 |                        0 |
| join_demo             | score              | 2025-08-05 17:05:07 |      4 |                    1 |                        0 |
| join_demo             | student            | 2025-08-05 17:03:07 |      2 |                    1 |                        0 |
| join_demo             | t1                 | 2025-08-05 15:54:36 |      3 |                    1 |                        0 |
| join_demo             | t2                 | 2025-08-05 15:54:58 |      3 |                    1 |                        0 |
| mysql                 | component          | 2025-07-14 02:07:51 |      0 |                    1 |                        0 |
| mysql_advanced_course | a                  | 2025-07-15 16:05:23 |    100 |                  225 |                        1 |
| mysql_advanced_course | t3                 | 2025-07-14 11:54:28 |      2 |                    1 |                        2 |
| sys                   | sys_config         | 2025-07-14 02:07:51 |      2 |                    1 |                        0 |
+-----------------------+--------------------+---------------------+--------+----------------------+--------------------------+
16 rows in set (0.00 sec)
```

注: 这里我的统计信息和书中的有所不同,一则因为随机的数据不同,再则MySQL的版本不同.我的版本是8.0.42;他的版本是5.7.22.
本章中后续内容使用的是我的统计数据,而非书中的.

可以看到`single_table`表的统计信息就对应着`mysql.innodb_table_stats`的第5条记录.几个重要统计信息项的值如下:

- `n_rows`: 表中用户记录数的估计值.本例中该字段值为10200,表明`single_table`表中大约有10200条记录.注意这个数据是估计值
- `clustered_index_size`: 该表的聚簇索引占用页面数的估计值.本例中该字段值为97,表明`single_table`表的聚簇索引占用97个页面,这个值是也是一个估计值
- `sum_of_other_index_sizes`该表的其他索引占用页面数的估计值.本例中该字段值为78,表明`single_table`表的其他索引一共占用78个页面,这个值是也是一个估计值
